version: '{build}'

os: Visual Studio 2015

environment:
  matrix:
    - COMPILER: msys2
      PLATFORM: x64
      MSYS2_ARCH: x86_64
      MSYS2_DIR: msys64
      MSYSTEM: MINGW64
      BIT: 64
      PROJ: "artoolkitplus,ffmpeg"
    - COMPILER: msys2
      PLATFORM: x64
      MSYS2_ARCH: x86_64
      MSYS2_DIR: msys64
      MSYSTEM: MINGW64
      BIT: 64
      PROJ: "artoolkitplus2,ffmpeg2"


init:
#    - ps: iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))
      
install:
    - 'echo install section'
    - 'cd ..'
    - 'git clone https://github.com/bytedeco/javacpp.git'
    - 'cd javacpp'
    - 'git checkout d7d6af2b4a2d5e5d3ea48cb27248e2f84a031fd2'
#    - 'mvn install'
    - 'cd ../javacpp-presets'

build_script:
    - 'echo build step for %PROJ%'
    - '%APPVEYOR_BUILD_FOLDER%\build.bat %PROJ%'

test_script:
    - 'echo no tests'

on_finish:
#    - ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))

